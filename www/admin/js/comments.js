const eventHub=new Vue,store=new Vuex.Store({state:{selected:"",blog:{}}});var BlogComment=Vue.component("blog-comment",{template:"#blog-comment-template",props:["comment"],data(){return{id:"",override:!1,unpublish:0==this.comment.published,remarks:""}},methods:{selectComment(e){this.id=e,store.state.selected=e},isSelected:e=>e==store.state.selected,deselectComment(){store.state.selected=""},submitReview(){let e=this;$.ajax({url:"/admin/blog/"+store.state.blog._id+"/comments/"+e.id,type:"PUT",dataType:"json",data:{id:e.id,unpublish:e.unpublish,override:e.override,remarks:e.remarks},success:function(e){console.log(e),store.state.blog=e.blog,store.state.selected="",eventHub.$emit("alert",{type:"success",message:"updated successfully"})},error:function(e){console.log(e.responseText),eventHub.$emit("alert",{type:"warning",message:e.responseText})}})}}}),BlogComments=Vue.component("blog-comments",{template:"#blog-comments-template",data:()=>({error:""}),computed:{blog:()=>store.state.blog,blogAuthor:()=>store.state.blog.author?store.state.blog.author.name:""},mounted(){eventHub.$on("select",this.onSelect);var e=document.currentScript.dataset.id;$.ajax({url:"/admin/blog/"+e,type:"get",dataType:"json",success:function(e){store.state.blog=e.blog}})}}),AlertFeedback=Vue.component("alert-feedback",{template:"#alert-feedback",data:()=>({alert:{message:"",type:"warning"}}),computed:{alertType(){switch(this.alert.type){case"warning":return"alert-warning";case"success":return"alert-success";default:return"alert-info"}}},methods:{closeAlert(){this.alert.message=""}},mounted(){let e=this;eventHub.$on("alert",function(t){e.alert=t,t.close&&setTimeout(function(){e.alert.message=""},t.close)})}}),app=new Vue({el:"#app"});