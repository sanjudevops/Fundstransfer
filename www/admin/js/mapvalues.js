var MapValuesEditor=Vue.component("map-values-editor",{template:"#map-values-editor",data:()=>({key:"",val:""}),computed:{mapValues:()=>store.state.mapValues},methods:{addKeyValue(){store.commit("addMapValue",{key:this.key,val:this.val}),this.key="",this.val=""},updateMapValues(){$.ajax({url:"/admin/mapvalues/"+store.state.siteId,type:"put",data:{mapValues:store.state.mapValues},dataType:"json",success:function(e){console.log(e),store.state.mapValues=e.mapValues,eventHub.$emit("alert",{type:"success",message:"update was successfull"})},error:function(e){console.log(e.responseText),eventHub.$emit("alert",{type:"warning",message:e.responseText})}})},dropMapValue(e){console.log("drop "+e),delete store.state.mapValues[e]&&this.updateMapValues()},selectMapValue(e){console.log("edit "+e),this.key=e,this.val=store.state.mapValues[e]}}}),AlertFeedback=Vue.component("alert-feedback",{template:"#alert-feedback",data:()=>({alert:{message:"",type:"warning"}}),computed:{alertType(){switch(this.alert.type){case"warning":return"alert-warning";case"success":return"alert-success";default:return"alert-info"}}},methods:{closeAlert(){this.alert.message=""}},mounted(){let e=this;eventHub.$on("alert",function(a){e.alert=a,a.close&&setTimeout(function(){e.alert.message=""},a.close)})}});const eventHub=new Vue,store=new Vuex.Store({state:{siteId:"",mapValues:{}},mutations:{addMapValue(e,a){e.mapValues[a.key]=a.val},refreshData(e,a){e.siteId=a.siteId,e.mapValues=a.mapValues||{}}}});var app=new Vue({el:"#app",mounted(){$.ajax({url:"/admin/mapvalues",type:"get",dataType:"json",success:function(e){console.log(e),store.commit("refreshData",e)},error:function(e){eventHub.$emit("alert",{type:"warning",message:e.responseText})}})}});