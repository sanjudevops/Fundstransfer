var AboutUsEditor=Vue.component("aboutus-editor",{template:"#aboutus-editor",data:()=>({skill:"",content:{key:"",value:"Add content"}}),computed:{aboutUs:()=>store.getters.aboutUs},methods:{addSkill(e){store.state.aboutUs.skills||(store.state.aboutUs.skills=[]),store.state.aboutUs.skills.push(this.skill),this.skill=""},dropSkill(e){var t=store.state.aboutUs.skills.indexOf(e);t>-1&&store.state.aboutUs.skills.splice(t,1)},addContent(e){console.log("adding content -> "+e.key);let t=$("#editor").summernote("code");store.commit("addContent",{key:e.key,value:t})},dropContent(e){console.log("dropping content -> "+e),this.$delete(store.state.aboutUs.content,e)},selectContent(e){console.log("selected content -> "+e),this.content={key:e,value:store.state.aboutUs.content[e]},$("#editor").summernote("code",store.state.aboutUs.content[e])}},mounted(){$("#editor").summernote({focus:!0}).summernote("code","Add content");$("#save").on("click",function(e){console.log(JSON.stringify(store.state.aboutUs)),$.ajax({url:"/admin/about/"+store.state.siteId,type:"put",dataType:"json",data:store.state.aboutUs,success:function(e){console.log(e),store.commit("refreshData",e),eventHub.$emit("alert",{type:"success",message:"saved successfully"})},error:function(e){eventHub.$emit("alert",{type:"warning",message:e.responseText})}})})}}),AlertFeedback=Vue.component("alert-feedback",{template:"#alert-feedback",data:()=>({alert:{message:"",type:"warning"}}),computed:{alertType(){switch(this.alert.type){case"warning":return"alert-warning";case"success":return"alert-success";default:return"alert-info"}}},methods:{closeAlert(){this.alert.message=""}},mounted(){let e=this;eventHub.$on("alert",function(t){e.alert=t,t.close&&setTimeout(function(){e.alert.message=""},t.close)})}});const eventHub=new Vue,store=new Vuex.Store({state:{user:{},siteId:"",aboutUs:{title:"",subTitle:"",header:"",subHeader:"",actionBtn:"",subscribeText:"",skills:[],content:{}}},getters:{aboutUs:e=>e.aboutUs},mutations:{refreshData(e,t){e.user=t.user,e.siteId=t.siteId,e.aboutUs=t.aboutUs},addContent(e,t){e.aboutUs.content||Vue.set(e.aboutUs,"content",{}),Vue.set(e.aboutUs.content,t.key,t.value)}}});var app=new Vue({el:"#app",mounted(){$.ajax({url:"/admin/about",type:"get",dataType:"json",success:function(e){store.commit("refreshData",e)},error:function(e){eventHub.$emit("alert",{type:"warning",message:e.responseText})}})}});